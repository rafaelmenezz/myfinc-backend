{
   "openapi": "3.0.0",
   "info": {
      "title": "Backend - Projeto Intregrador USJ II- Myfinc",
      "description": "MyFinc - Aplicação de Gestão de Finanças pessoais.",
      "contact": {
         "email": "rafael.menezes@aluno.usj.edu.br"
      },
      "license": {
         "name": "Apache 2.0",
         "url": "https://www.apache.org/licenses/LICENSE-2.0.html"
      },
      "version": "1.0.1"
   },
   "servers": [
      {
         "url": "http://localhost:3000",
         "description": "Desenvolvimento"
      },
      {
         "url": "http://localhost:3000",
         "description": "Desenvolvimento"
      }

   ],
   "paths": {
      "/signup/": {
         "post": {
            "summary": "Signup - Cadastro de Usuário",
            "description": "Rota responsável por cadastrar usuários",
            "tags": [
               "Signup"
            ],
            "requestBody": {
               "content": {
                  "application/json": {
                     "schema": {
                        "type": "object",
                        "$ref": "#/components/schemas/signup"
                     },
                     "examples": {
                        "usuario": {
                           "value": {
                              "nome": "<nome usuário>",
                              "email": "user@user.com",
                              "telefone": "99 99999999",
                              "senha": "1234",
                              "confirmaSenha": "1234"
                           }
                        }
                     }
                  }
               }
            },
            "responses": {
               "400": {
                  "description": "Nome não informado! || Email não informado! || Telefone não informado! || Senha não informada! || Confirmação de Senha não informada! || Senha não conferem! || Usuário já cadastrado !"
               },
               "200": {
                  "description": "Ok",
                  "content": {
                     "aplication/json": {
                        "schema": {
                           "type": "object",
                           "properties": {
                              "cod": {
                                 "type": "number"
                              }
                           }
                        }
                     }
                  }
               }
            }
         }
      },
      "/signin/": {
         "post": {
            "summary": "Signin - Login",
            "description": "Rota responsável por realizar login informando email/senha",
            "tags": [
               "Signin - Login"
            ],
            "requestBody": {
               "content": {
                  "application/json": {
                     "schema": {
                        "type": "object",
                        "properties": {
                           "email": {
                              "type": "string"
                           },
                           "senha": {
                              "type": "string"
                           }
                        }
                     },
                     "examples": {
                        "usuario": {
                           "value": {
                              "email": "swagger@swagger.com",
                              "senha": "1234"
                           }
                        }
                     }
                  }
               }
            },
            "responses": {
               "400": {
                  "description": "Informe o email e senha! | Usuário não cadastrado! | Email/senha inválidos!"
               },
               "200": {
                  "description": "Ok",
                  "content": {
                     "aplication/json": {
                        "schema": {
                           "type": "object",
                           "$ref": "#/components/schemas/signin"
                        }
                     }
                  }
               }
            }
         }
      },
      "/usuarios/{cod}": {
         "get": {
            "summary": "Busca usuário pelo código",
            "description": "Rota responsável por buscar usuário pelo código",
            "tags": [
               "Usuários"
            ],
            "parameters": [
               {
                  "name": "cod",
                  "in": "path",
                  "description": "Buscar usuário pelo código",
                  "required": true
               }
            ],
            "security": [
               {
                  "bearerAuth": []
               }
            ],
            "responses": {
               "200": {
                  "description": "Ok",
                  "content": {
                     "aplication/json": {
                        "schema": {
                           "type": "object",
                           "$ref": "#/components/schemas/usuarios"
                        }
                     }
                  }
               },
               "401": {
                  "description": "Unauthorized"
               }
            }
         },
         "put": {
            "summary": "Altera dados do usuário",
            "description": "Rota responsável por alterar dados do usuário informando o código",
            "tags": [
               "Usuários"
            ],
            "parameters": [
               {
                  "name": "cod",
                  "in": "path",
                  "description": "Alterar dados do usuário pelo código",
                  "required": true
               }
            ],
            "security": [
               {
                  "bearerAuth": []
               }
            ],
            "requestBody": {
               "content": {
                  "application/json": {
                     "schema": {
                        "type": "object",
                        "$ref": "#/components/schemas/usuarios"
                     },
                     "examples": {
                        "usuario": {
                           "value": {
                              "nome": "Nome Usuário",
                              "email": "user@user.com",
                              "telefone": "48 99999999"
                           }
                        }
                     }
                  }
               }
            },
            "responses": {
               "401": {
                  "description": "Não autorizado!"
               },
               "400": {
                  "description": "Nome não informado! || Email não informado!"
               },
               "200": {
                  "description": "Dados do usuário alterado com sucesso!"
               }
            }
         }
      },
      "/familias/": {
         "post": {
            "summary": "Cadastro de Conta/Familia",
            "description": "Rota responsável por cadastrar familias",
            "tags": [
               "Famílias"
            ],
            "security": [
               {
                  "bearerAuth": []
               }
            ],
            "requestBody": {
               "content": {
                  "application/json": {
                     "schema": {
                        "type": "object",
                        "$ref": "#/components/schemas/contas"
                     },
                     "examples": {
                        "família": {
                           "value": {
                              "nome": "Nome da familia",
                              "usuario": {
                                 "cod": 1
                              }
                           }
                        }
                     }
                  }
               }
            },
            "responses": {
               "401": {
                  "description": "Não autorizado!"
               },
               "400": {
                  "description": "Nome da família não informado!"
               },
               "200": {
                  "description": "Ok",
                  "content": {
                     "aplication/json": {
                        "schema": {
                           "type": "object",
                           "properties": {
                              "cod": {
                                 "type": "number"
                              }
                           }
                        }
                     }
                  }
               }
            }
         },
         "put": {
            "summary": "Alterar o nome da família",
            "description": "Rota responsável por alterar o nome da familia",
            "tags": [
               "Famílias"
            ],
            "security": [
               {
                  "bearerAuth": []
               }
            ],
            "requestBody": {
               "content": {
                  "application/json": {
                     "schema": {
                        "type": "object",
                        "$ref": "#/components/schemas/contas"
                     },
                     "examples": {
                        "família": {
                           "value": {
                              "cod": 0,
                              "nome": "Nome da familia",
                              "usuario": {
                                 "cod": 0,
                                 "admin": true
                              }
                           }
                        }
                     }
                  }
               }
            },
            "responses": {
               "401": {
                  "description": "Não autorizado!"
               },
               "200": {
                  "description": "Nome da familia alterado com sucesso!"
               }
            }
         }
      },
      "/familias/grupos/{cod}": {
         "get": {
            "summary": "Buscar familia pelo código",
            "description": "Rota responsável pela busca da familia através do código.",
            "tags": [
               "Famílias"
            ],
            "parameters": [
               {
                  "name": "cod",
                  "in": "path",
                  "description": "Buscar conta/família pelo código",
                  "required": true
               }
            ],
            "security": [
               {
                  "bearerAuth": []
               }
            ],
            "responses": {
               "200": {
                  "description": "Ok"
               }
            }
         }
      },
      "/usuarios/grupos/{cod}": {
         "get": {
            "summary": "Buscar a(s) familia(s) pelo seu código",
            "description": "Rota responsável pela busca da(s) familia(s) do usuário informando o seu código através do código.",
            "tags": [
               "Famílias"
            ],
            "parameters": [
               {
                  "name": "cod",
                  "in": "path",
                  "description": "Buscar família pelo código",
                  "required": true
               }
            ],
            "security": [
               {
                  "bearerAuth": []
               }
            ],
            "responses": {
               "200": {
                  "description": "Ok"
               }
            }
         }
      },
      "/financas/": {
         "post": {
            "summary": "Cadastro de finanças",
            "description": "Rota responsável por cadastrar finanças",
            "tags": [
               "Finanças"
            ],
            "security": [
               {
                  "bearerAuth": []
               }
            ],
            "requestBody": {
               "content": {
                  "application/json": {
                     "schema": {
                        "type": "object",
                        "$ref": "#/components/schemas/financas"
                     },
                     "examples": {
                        "Família": {
                           "value": {
                              "descricao": "descrição",
                              "codusuario": 0,
                              "codfamilia": 0,
                              "parentcod": 0
                           }
                        },
                        "Usuário": {
                           "value": {
                              "descricao": "descrição",
                              "codusuario": 0,
                              "parentcod": 0
                           }
                        }
                     }
                  }
               }
            },
            "responses": {
               "500": {
                  "description": "Falha no servidor!"
               },
               "401": {
                  "description": "Não autorizado!"
               },
               "400": {
                  "description": "Descrição não informada! ou Código do usuário não informado!"
               },
               "200": {
                  "description": "Ok"
               }
            }
         }
      },
      "/financas/{cod}": {
         "put": {
            "summary": "Alterar nome da finanças",
            "description": "Rota responsável por alterar dados da finança",
            "tags": [
               "Finanças"
            ],
            "parameters": [
               {
                  "name": "cod",
                  "in": "path",
                  "description": "Código da finança",
                  "required": true
               }
            ],
            "security": [
               {
                  "bearerAuth": []
               }
            ],
            "requestBody": {
               "content": {
                  "application/json": {
                     "schema": {
                        "type": "object",
                        "$ref": "#/components/schemas/financas"
                     },
                     "examples": {
                        "alterar descricao": {
                           "value": {
                              "descricao": "descrição",
                              "codusuario": 0
                           }
                        }
                     }
                  }
               }
            },
            "responses": {
               "500": {
                  "description": "Falha no servidor!"
               },
               "401": {
                  "description": "Não autorizado!"
               },
               "400": {
                  "description": "Descrição não informada! ou Código do usuário não informado!"
               },
               "200": {
                  "description": "Ok"
               }
            }
         },
         "delete": {
            "summary": "Deletar finanças.",
            "description": "Rota responsável por deletar financas",
            "tags": [
               "Finanças"
            ],
            "parameters": [
               {
                  "name": "cod",
                  "in": "path",
                  "description": "Código da finança",
                  "required": true
               }
            ],
            "security": [
               {
                  "bearerAuth": []
               }
            ],
            "responses": {
               "500": {
                  "description": "Falha no servidor!"
               },
               "401": {
                  "description": "Não autorizado!"
               },
               "200": {
                  "description": "Ok"
               }
            }
         }
      },
      "/financas/familias/{cod}": {
         "get": {
            "summary": "Busca as finanças da familia",
            "description": "Rota responsável por buscas as finanças da familia",
            "tags": [
               "Finanças"
            ],
            "parameters": [
               {
                  "name": "cod",
                  "in": "path",
                  "description": "Código da família",
                  "required": true
               }
            ],
            "security": [
               {
                  "bearerAuth": []
               }
            ],
            "responses": {
               "500": {
                  "description": "Falha no servidor!"
               },
               "401": {
                  "description": "Não autorizado!"
               },
               "400": {
                  "description": "Descrição não informada! ou Código do usuário não informado!"
               },
               "200": {
                  "description": "Ok"
               }
            }
         }
      },
      "/financas/usuarios/{cod}": {
         "get": {
            "summary": "Busca as finanças do usuário",
            "description": "Rota responsável por buscas as finanças do usuário",
            "tags": [
               "Finanças"
            ],
            "parameters": [
               {
                  "name": "cod",
                  "in": "path",
                  "description": "Código da família",
                  "required": true
               }
            ],
            "security": [
               {
                  "bearerAuth": []
               }
            ],
            "responses": {
               "500": {
                  "description": "Falha no servidor!"
               },
               "401": {
                  "description": "Não autorizado!"
               },
               "200": {
                  "description": "Ok"
               }
            }
         }
      },
      "/montantes/": {
         "post": {
            "summary": "Cadastro de montandes",
            "description": "Rota responsável por cadastrar montantes",
            "tags": [
               "Montantes"
            ],
            "security": [
               {
                  "bearerAuth": []
               }
            ],
            "requestBody": {
               "content": {
                  "application/json": {
                     "schema": {
                        "type": "object",
                        "$ref": "#/components/schemas/montantes"
                     },
                     "examples": {
                        "montantes": {
                           "value": {
                              "pagamento": "pagamento",
                              "dt_vencimento": "2021-11-15",
                              "valor": 0,
                              "codfinanca": 0
                           }
                        },
                        "Sem data de vencimento": {
                           "value": {
                              "pagamento": "pagamento",
                              "valor": 0,
                              "codfinanca": 0
                           }
                        }
                     }
                  }
               }
            },
            "responses": {
               "401": {
                  "description": "Não autorizado!"
               },
               "400": {
                  "description": "Pagamentos, ou valor, ou código da finança não informado!"
               },
               "200": {
                  "description": "Ok",
                  "content": {
                     "aplication/json": {
                        "schema": {
                           "type": "object",
                           "properties": {
                              "cod": {
                                 "type": "number"
                              }
                           }
                        }
                     }
                  }
               }
            }
         }
      },
      "/montantes/{cod}": {
         "get": {
            "summary": "Buscar montantes pelo código",
            "description": "Rota responsável pela buscar montante através do código.",
            "tags": [
               "Montantes"
            ],
            "parameters": [
               {
                  "name": "cod",
                  "in": "path",
                  "description": "Buscar montante pelo código",
                  "required": true
               }
            ],
            "security": [
               {
                  "bearerAuth": []
               }
            ],
            "responses": {
               "200": {
                  "description": "Ok",
                  "content": {
                     "aplication/json": {
                        "schema": {
                           "type": "object",
                           "$ref": "#/components/schemas/montantes"
                        }
                     }
                  }
               }
            }
         },
         "put": {
            "summary": "Alterar nome da montantes informando o código",
            "description": "Rota responsável por alterar montantes informando o código.",
            "tags": [
               "Montantes"
            ],
            "parameters": [
               {
                  "name": "cod",
                  "in": "path",
                  "description": "Código do montante",
                  "required": true
               }
            ],
            "security": [
               {
                  "bearerAuth": []
               }
            ],
            "requestBody": {
               "content": {
                  "application/json": {
                     "schema": {
                        "type": "object",
                        "$ref": "#/components/schemas/montante"
                     },
                     "examples": {
                        "montante": {
                           "value": {
                              "pagamento": "Desposito - Caixa",
                              "valor": "5000"
                           }
                        }
                     }
                  }
               }
            },
            "responses": {
               "200": {
                  "description": "Nome da fámilia alterado com sucesso!."
               },
               "400": {
                  "description": "Nome da família não informado"
               },
               "500": {
                  "description": "Falha no servidor!"
               }
            }
         },
         "delete": {
            "summary": "Deleta montante informando o código",
            "description": "Rota responsável por deletar o montante informando o código.",
            "tags": [
               "Montantes"
            ],
            "parameters": [
               {
                  "name": "cod",
                  "in": "path",
                  "description": "Código do montante",
                  "required": true
               }
            ],
            "security": [
               {
                  "bearerAuth": []
               }
            ],
            "responses": {
               "200": {
                  "description": "Nome da fámilia alterado com sucesso!."
               },
               "400": {
                  "description": "Nome da família não informado"
               },
               "500": {
                  "description": "Falha no servidor!"
               }
            }
         }
      },
      "/avisos/convidar": {
         "post": {
            "summary": "Convidar os usuários que estão fora da plataforma",
            "description": "Rota responsável por realizar um pré-cadastro de um usuário com seu email",
            "tags": [
               "Avisos"
            ],
            "security": [
               {
                  "bearerAuth": []
               }
            ],
            "requestBody": {
               "content": {
                  "application/json": {
                     "schema": {
                        "type": "object",
                        "$ref": "#/components/schemas/avisos"
                     },
                     "examples": {
                        "convite": {
                           "value": {
                              "codusuario": 0,
                              "codfamilia": 0,
                              "email": 0
                           }
                        }
                     }
                  }
               }
            },
            "responses": {
               "200": {
                  "description": "Ok",
                  "content": {
                     "aplication/json": {
                        "schema": {
                           "type": "object",
                           "$ref": "#/components/schemas/avisos"
                        }
                     }
                  }
               }
            }
         }
      },
      "/avisos/usuarios/{cod}": {
         "get": {
            "summary": "Avisos do usuários",
            "description": "Rota responsável por buscar avisos do usuários",
            "tags": [
               "Avisos"
            ],
            "parameters": [
               {
                  "name": "cod",
                  "in": "path",
                  "description": "Código do usuário",
                  "required": true
               }
            ],
            "security": [
               {
                  "bearerAuth": []
               }
            ],
            "responses": {
               "200": {
                  "description": "Ok",
                  "content": {
                     "aplication/json": {
                        "schema": {
                           "type": "object",
                           "$ref": "#/components/schemas/avisos"
                        }
                     }
                  }
               }
            }
         }
      },
      "/avisos/{email}": {
         "get": {
            "summary": "Avisos do usuários",
            "description": "Rota responsável por buscar avisos do usuários por email",
            "tags": [
               "Avisos"
            ],
            "parameters": [
               {
                  "name": "email",
                  "in": "path",
                  "description": "Email do usuário",
                  "required": true
               }
            ],
            "security": [
               {
                  "bearerAuth": []
               }
            ],
            "responses": {
               "200": {
                  "description": "Ok",
                  "content": {
                     "aplication/json": {
                        "schema": {
                           "type": "object",
                           "$ref": "#/components/schemas/avisos"
                        }
                     }
                  }
               }
            }
         }
      }
   },
   "components": {
      "schemas": {
         "signin": {
            "type": "object",
            "properties": {
               "cod": {
                  "type": "number"
               },
               "nome": {
                  "type": "string"
               },
               "email": {
                  "type": "string"
               },
               "telefone": {
                  "type": "string"
               },
               "iat": {
                  "type": "number"
               },
               "exp": {
                  "type": "number"
               },
               "token": {
                  "type": "string"
               }
            }
         },
         "signup": {
            "type": "object",
            "properties": {
               "nome": {
                  "type": "string"
               },
               "email": {
                  "type": "string"
               },
               "telefone": {
                  "type": "string"
               },
               "senha": {
                  "type": "string"
               },
               "confirmaSenha": {
                  "type": "string"
               }
            }
         },
         "usuarios": {
            "type": "object",
            "properties": {
               "cod": {
                  "type": "number"
               },
               "nome": {
                  "type": "string"
               },
               "email": {
                  "type": "string"
               },
               "telefone": {
                  "type": "string"
               }
            }
         },
         "familias": {
            "type": "object",
            "properties": {
               "cod": {
                  "type": "number"
               },
               "nome": {
                  "type": "string"
               }
            }
         },
         "grupo": {
            "type": "object",
            "properties": {
               "codconta": {
                  "type": "number"
               },
               "codusuario": {
                  "type": "number"
               },
               "admin": {
                  "type": "boolean"
               }
            }
         },
         "grupos": {
            "type": "object",
            "properties": {
               "cod": {
                  "type": "number"
               },
               "nome": {
                  "type": "string"
               },
               "usuários": {
                  "type": "array",
                  "items": {
                     "type": "object",
                     "properties": {
                        "cod": {
                           "type": "number"
                        },
                        "nome": {
                           "type": "string"
                        },
                        "telefone": {
                           "type": "string"
                        },
                        "email": {
                           "type": "string"
                        },
                        "admin": {
                           "type": "boolean"
                        }
                     }
                  }
               }
            }
         },
         "financas": {
            "type": "object",
            "properties": {
               "cod": {
                  "type": "number"
               },
               "descricao": {
                  "type": "string"
               },
               "parentcod": {
                  "type": "number"
               },
               "codconta": {
                  "type": "number"
               },
               "codusuario": {
                  "type": "number"
               }
            }
         },
         "montantes": {
            "type": "object",
            "properties": {
               "cod": {
                  "type": "number"
               },
               "pagamento": {
                  "type": "string"
               },
               "dt_vencimento": {
                  "type": "date"
               },
               "valor": {
                  "type": "number"
               },
               "codfinanca": {
                  "type": "number"
               }
            }
         },
         "avisos": {
            "type": "object",
            "properties": {
               "cod": {
                  "type": "number"
               },
               "tipo": {
                  "type": "number"
               },
               "codusuario": {
                  "type": "number"
               },
               "codfamilia": {
                  "type": "number"
               },
               "lida": {
                  "type": "boolean"
               },
               "email": {
                  "type": "string"
               }
            }
         }
      },
      "securitySchemes": {
         "bearerAuth": {
            "type": "http",
            "scheme": "bearer",
            "bearerFormat": "JWT"
         }
      }
   }
}